<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>たわみ計算機</title>
  <style>
    body { font-family: sans-serif; background:#f5f5f5; padding:20px; }
    .box { background:#fff; padding:20px; max-width:420px; border-radius:8px; }
    input, select, button { width:100%; margin-bottom:10px; padding:6px; font-size:16px; }
    .result { font-size:18px; font-weight:bold; }
  </style>
</head>
<body>

<div class="box">
  <h2>はりのたわみ計算機</h2>

  <form onsubmit="calc(); return false;">

    <label>断面形状</label>
    <select id="shape">
      <option value="block">角材</option>
      <option value="round">丸棒</option>
      <option value="l">L形鋼</option>
      <option value="i">I形鋼</option>
      <option value="h">H形鋼</option>
    </select>

    <label>寸法 a（mm）</label>
    <input type="number" id="a">

    <label>寸法 b（mm）</label>
    <input type="number" id="b">

    <label>板厚 t（mm）</label>
    <input type="number" id="t">

    <label>スパン L（mm）</label>
    <input type="number" id="L">

    <label>中央荷重 P（N）</label>
    <input type="number" id="P">

    <label>縦弾性係数 E（GPa）</label>
    <select id="E">
      <option value="205">鉄</option>
      <option value="70">アルミ</option>
      <option value="3">MCナイロン</option>
    </select>

    <button type="submit">計算（Enter可）</button>
    <div class="result" id="result"></div>

  </form>
</div>

<script>
function calc() {
  const s = shape.value;
  const a = Number(a.value);
  const b = Number(b.value);
  const t = Number(t.value);
  const L = Number(L.value);
  const P = Number(P.value);
  const E = Number(E.value) * 1000;

  if (!a || !L || !P) {
    result.textContent = "数値を正しく入力してください";
    return;
  }

  let I = 0;
  if (s === "block") I = b * a**3 / 12;
  if (s === "round") I = Math.PI * a**4 / 64;
  if (s === "l") I = (b*a**3 - (b-t)*(a-t)**3) / 12;
  if (s === "i" || s === "h")
    I = (b*a**3 - (b-t)*(a-2*t)**3) / 12;

  const delta = P * L**3 / (48 * E * I);
  result.textContent = "最大たわみ：約 " + delta.toFixed(3) + " mm";
}
</script>

</body>
</html>
